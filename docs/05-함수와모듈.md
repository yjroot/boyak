# 보약 함수와 모듈

## 1. 함수 설계 원칙

### 1.1 한국어 어순에 맞는 함수 정의

한국어에서 "무엇을 어떻게 하다"의 구조를 따릅니다:
- "더하기**를** 정의하자" (함수 선언)
- "값을 **돌려주라**" (반환)
- "인자**를** 받아" (매개변수)

### 1.2 함수는 일급 객체

함수도 변수에 할당하고, 다른 함수에 전달할 수 있습니다.

## 2. 함수 정의

### 2.1 기본 함수 정의

```보약
# 매개변수가 없는 함수
인사를 정의하자
    "안녕하세요!"를 출력하라

# 매개변수가 있는 함수
맞춤인사를 정의하자 이름을 받아
    "안녕하세요, {이름}님!"을 출력하라

# 여러 매개변수
더하기를 정의하자 첫째와 둘째를 받아
    첫째 + 둘째를 돌려주라

# 기본값이 있는 매개변수
인사하기를 정의하자 이름과 인사말을 받아 (인사말은 "안녕하세요")
    "{인사말}, {이름}님!"을 돌려주라
```

**설계 근거:**
- "~를 정의하자"는 청유형으로 "이것을 정의하자"라는 의미
- "~을 받아"는 입력을 받는다는 것을 명확히 표현
- "~와"로 여러 매개변수 구분 (한국어 접속사)
- 기본값은 괄호 안에 "~은 ~"으로 지정

### 2.2 반환 값

```보약
# 값 반환
제곱을 정의하자 숫자를 받아
    숫자 * 숫자를 돌려주라

# 여러 값 반환
나누기결과를 정의하자 피제수와 제수를 받아
    몫은 피제수 // 제수이다
    나머지는 피제수 % 제수이다
    몫과 나머지를 돌려주라

# 사용
몫값, 나머지값은 나누기결과(17, 5)이다
```

**설계 근거:**
- "돌려주라"는 결과를 호출자에게 돌려준다는 의미
- 여러 값은 "~과/와"로 연결하여 튜플로 반환

### 2.3 가변 인자

```보약
# 여러 개의 인자 (*args)
모두더하기를 정의하자 숫자들을 여러개받아
    합계는 0이다
    각각의 숫자를 숫자들에서 반복하자
        합계 += 숫자
    합계를 돌려주라

# 사용
결과는 모두더하기(1, 2, 3, 4, 5)이다    # 15

# 키워드 인자 (**kwargs)
학생정보를 정의하자 정보를 이름붙여받아
    정보의 각쌍을 키와 값으로 반복하자
        "{키}: {값}"을 출력하라

# 사용
학생정보(이름="홍길동", 나이=20, 학과="컴퓨터")
```

**설계 근거:**
- "여러개받아"는 가변 개수의 인자를 받음을 표현
- "이름붙여받아"는 키워드 인자를 받음을 표현

## 3. 함수 호출

### 3.1 기본 호출

```보약
# 반환값 없는 함수 호출
인사를 하라
인사()                          # 대안 문법

# 반환값 사용
결과는 더하기(3, 5)이다
결과는 3과 5를 더하기하라        # 대안 문법 (어순 변경)
```

### 3.2 키워드 인자로 호출

```보약
# 키워드 인자 사용
인사하기(이름="홍길동", 인사말="환영합니다")

# 위치 인자와 키워드 인자 혼합
인사하기("홍길동", 인사말="환영합니다")
```

### 3.3 함수를 변수로

```보약
# 함수를 변수에 할당
계산함수는 더하기이다
결과는 계산함수(3, 5)이다        # 8

# 함수를 인자로 전달
적용하기를 정의하자 함수와 값을 받아
    함수(값)을 돌려주라

제곱을 정의하자 숫자를 받아
    숫자 * 숫자를 돌려주라

결과는 적용하기(제곱, 5)이다     # 25
```

## 4. 람다 (익명 함수)

```보약
# 간단한 람다
제곱은 함수(숫자): 숫자 * 숫자이다

# 사용
결과는 제곱(5)이다               # 25

# 목록과 함께 사용
숫자들은 [1, 2, 3, 4, 5]이다
제곱들은 숫자들을 함수(숫자): 숫자 * 숫자로 변환한것이다
# [1, 4, 9, 16, 25]

# 정렬에 사용
학생들은 [{"이름": "김철수", "점수": 85}, {"이름": "이영희", "점수": 92}]이다
학생들을 함수(학생): 학생["점수"]로 정렬하라
```

**설계 근거:**
- "함수(인자): 표현식" 구조로 람다 정의
- Python의 lambda와 유사하지만 더 명확한 키워드 사용

## 5. 내장 함수

### 5.1 입출력 함수

| 함수 | 설명 | 사용법 |
|------|------|--------|
| `출력하라` | 화면에 출력 | `"안녕"을 출력하라` |
| `입력받아라` | 사용자 입력 | `이름은 "이름: "로 입력받아라` |

### 5.2 타입 변환 함수

| 함수 | 설명 | 사용법 |
|------|------|--------|
| `정수` / `정수로` | 정수 변환 | `정수("123")` 또는 `"123"을 정수로` |
| `실수` / `실수로` | 실수 변환 | `실수("3.14")` |
| `문자열` / `문자열로` | 문자열 변환 | `문자열(123)` |
| `목록` / `목록으로` | 목록 변환 | `목록("안녕")` → `["안", "녕"]` |

### 5.3 수학 함수

| 함수 | 설명 | 사용법 |
|------|------|--------|
| `절대값` | 절대값 | `절대값(-5)` → `5` |
| `최대값` | 최대값 | `최대값(3, 7, 2)` → `7` |
| `최소값` | 최소값 | `최소값(3, 7, 2)` → `2` |
| `반올림` | 반올림 | `반올림(3.7)` → `4` |
| `올림` | 올림 | `올림(3.2)` → `4` |
| `내림` | 내림 | `내림(3.9)` → `3` |
| `제곱근` | 제곱근 | `제곱근(16)` → `4` |

### 5.4 컬렉션 함수

| 함수 | 설명 | 사용법 |
|------|------|--------|
| `길이` | 길이/크기 | `길이([1,2,3])` → `3` |
| `합계` | 합계 | `합계([1,2,3])` → `6` |
| `평균` | 평균 | `평균([1,2,3])` → `2` |
| `정렬` | 정렬된 새 목록 | `정렬([3,1,2])` → `[1,2,3]` |
| `뒤집기` | 뒤집힌 새 목록 | `뒤집기([1,2,3])` → `[3,2,1]` |
| `범위` | 숫자 범위 생성 | `범위(1, 5)` → `[1,2,3,4]` |

### 5.5 문자열 함수

문자열 메서드는 "문자열의 ~" 또는 "문자열.~" 형태로 사용:

```보약
텍스트는 "  안녕하세요  "이다

# 공백 제거
정리된텍스트는 텍스트의 공백제거이다
정리된텍스트는 텍스트.공백제거()이다    # 대안 문법

# 대소문자 (영문)
영문은 "Hello World"이다
대문자는 영문의 대문자이다               # "HELLO WORLD"
소문자는 영문의 소문자이다               # "hello world"

# 분리와 결합
단어들은 "사과,배,포도"의 ","로 분리한것이다    # ["사과", "배", "포도"]
결합된것은 단어들을 "-"로 결합한것이다          # "사과-배-포도"

# 치환
새텍스트는 텍스트에서 "안녕"을 "반가워"로 바꾼것이다

# 포함 여부
포함여부는 "안녕"이 텍스트에 있는지이다    # 참
```

## 6. 모듈

### 6.1 모듈 가져오기

```보약
# 전체 모듈 가져오기
수학을 가져오라
결과는 수학.제곱근(16)이다

# 특정 항목만 가져오기
수학에서 제곱근과 원주율을 가져오라
결과는 제곱근(16)이다
원의넓이는 원주율 * 반지름 ** 2이다

# 별칭으로 가져오기
수학을 ㅅ으로 가져오라
결과는 ㅅ.제곱근(16)이다
```

**설계 근거:**
- "가져오라"는 import의 의미를 명확히 전달
- "~에서 ~를 가져오라"는 from ... import 구조
- "~으로"는 별칭(alias) 지정

### 6.2 모듈 만들기

파일 `수학도구.보약`:
```보약
# 수학도구.보약

원주율은 3.141592653589793이다

원넓이를 정의하자 반지름을 받아
    원주율 * 반지름 ** 2를 돌려주라

원둘레를 정의하자 반지름을 받아
    2 * 원주율 * 반지름을 돌려주라
```

사용:
```보약
수학도구를 가져오라

넓이는 수학도구.원넓이(5)이다
둘레는 수학도구.원둘레(5)이다
```

### 6.3 내장 모듈

| 모듈 | 설명 | 주요 기능 |
|------|------|----------|
| `수학` | 수학 함수 | 삼각함수, 로그, 상수 |
| `날짜` | 날짜/시간 | 현재시각, 날짜계산 |
| `파일` | 파일 입출력 | 읽기, 쓰기, 삭제 |
| `무작위` | 난수 생성 | 난수, 선택, 섞기 |
| `글자` | 문자열 도구 | 정규식, 인코딩 |
| `시스템` | 시스템 정보 | 환경변수, 인자 |

## 7. 클로저와 데코레이터

### 7.1 클로저

```보약
카운터만들기를 정의하자
    횟수는 0이다

    증가를 정의하자
        횟수 += 1
        횟수를 돌려주라

    증가를 돌려주라

세기는 카운터만들기()이다
세기()를 출력하라    # 1
세기()를 출력하라    # 2
세기()를 출력하라    # 3
```

### 7.2 데코레이터

```보약
# 데코레이터 정의
시간측정을 정의하자 함수를 받아
    감싼함수를 정의하자 인자들을 여러개받아
        시작은 현재시각이다
        결과는 함수(인자들...)이다
        끝은 현재시각이다
        "실행 시간: {끝 - 시작}초"를 출력하라
        결과를 돌려주라
    감싼함수를 돌려주라

# 데코레이터 사용
@시간측정
느린함수를 정의하자
    잠시멈추라(2)
    "완료"를 돌려주라

느린함수()
```

**설계 근거:**
- `@` 문법은 Python과 동일 (보편성)
- 데코레이터의 개념을 한글로 설명하기 어렵기에 기호 유지

## 8. 함수 문서화

```보약
##
원의 넓이를 계산합니다.

매개변수:
    반지름: 원의 반지름 (양수)

반환값:
    원의 넓이

예시:
    >>> 원넓이(5)
    78.54
##
원넓이를 정의하자 반지름을 받아
    만약 반지름이 0보다 작거나같으면
        "반지름은 양수여야 합니다"라는 값오류를 발생시켜라
    원주율 * 반지름 ** 2를 돌려주라
```

**설계 근거:**
- `## ~ ##`로 문서화 문자열(docstring) 표시
- 구조화된 형식으로 일관성 유지
- `>>>`로 예시 코드 표시 (doctests 지원 가능)
